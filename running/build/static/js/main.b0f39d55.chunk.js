(this.webpackJsonprunning=this.webpackJsonprunning||[]).push([[0],{192:function(e,t,a){e.exports=a(357)},198:function(e,t,a){},199:function(e,t,a){},222:function(e,t){},224:function(e,t){},260:function(e,t){},261:function(e,t){},347:function(e,t){},357:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(31),s=a.n(l),c=(a(197),a(198),a(22)),o=a(23),i=a(24),u=a(25),m=a(29),p=a(8),h=(a(199),a(18)),d=a.n(h),E=a(32),g=a(359),w=a(360),f=a(363),b=a(361),v=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={username:"",email:"",password:"",isAuth:!1},e.changeHandler=function(t){e.setState(Object(E.a)({},t.target.name,t.target.value))},e.registerHandler=function(){e.props.register(e.state)},e}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Register"),r.a.createElement("div",null,r.a.createElement(g.a,null,r.a.createElement(w.a,null,r.a.createElement(f.a.Control,{name:"username",type:"username",placeholder:"username",onChange:this.changeHandler})),r.a.createElement(w.a,null,r.a.createElement(f.a.Control,{name:"email",type:"email",placeholder:"email",onChange:this.changeHandler})),r.a.createElement(w.a,null,r.a.createElement(f.a.Control,{name:"password",type:"password",placeholder:"password",onChange:this.changeHandler})),r.a.createElement(b.a,{variant:"primary",block:!0,onClick:this.registerHandler}," ","Register"))))}}]),a}(n.Component),y=a(180),N=a(367),k=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(N.a,{style:{width:"15rem",height:"10rem"}},r.a.createElement(N.a.Body,null,r.a.createElement(N.a.Title,null,this.props.city," weather"),r.a.createElement(N.a.Text,null,r.a.createElement("span",null,"Temp : ",this.props.weather.temp," \xb0C"),r.a.createElement("br",null),r.a.createElement("span",null,"Temp Min : ",this.props.weather.temp_min," \xb0C"),r.a.createElement("br",null),r.a.createElement("span",null,"Temp Max : ",this.props.weather.temp_max," \xb0C")))))}}]),a}(n.Component),j=a(179),O=a(362),x=a(27),T=a.n(x),C=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(g.a,null,r.a.createElement(w.a,null,r.a.createElement(j.a,{sm:9,className:"mt-5"},r.a.createElement("h1",null,"Welcome to your dashboard, ",this.props.username)),r.a.createElement(j.a,{sm:3},r.a.createElement(k,{weather:this.props,city:this.props.city}))),r.a.createElement(w.a,null,r.a.createElement(j.a,null,r.a.createElement("h3",null,"Business News"))),r.a.createElement(w.a,null,r.a.createElement(j.a,null,r.a.createElement(O.a,null,r.a.createElement(N.a,null,r.a.createElement(N.a.Img,{variant:"top",src:this.props.news1.urlToImage}),r.a.createElement(N.a.Body,null,r.a.createElement(N.a.Title,null,this.props.news1.title),r.a.createElement(N.a.Text,null,r.a.createElement("a",{href:this.props.news1.url},this.props.news1.description))),r.a.createElement(N.a.Footer,null,r.a.createElement("small",{className:"text-muted"},"Last updated"," ",r.a.createElement(T.a,{date:this.props.news1.publishedAt,durationFromNow:!0})," ","hours ago"))),r.a.createElement(N.a,null,r.a.createElement(N.a.Img,{variant:"top",src:this.props.news2.urlToImage}),r.a.createElement(N.a.Body,null,r.a.createElement(N.a.Title,null,this.props.news2.title),r.a.createElement(N.a.Text,null,r.a.createElement("a",{href:this.props.news2.url},this.props.news2.description))),r.a.createElement(N.a.Footer,null,r.a.createElement("small",{className:"text-muted"},"Last updated"," ",r.a.createElement(T.a,{date:this.props.news2.publishedAt,durationFromNow:!0})," ","hours ago"))),r.a.createElement(N.a,null,r.a.createElement(N.a.Img,{variant:"top",src:this.props.news3.urlToImage}),r.a.createElement(N.a.Body,null,r.a.createElement(N.a.Title,null,this.props.news3.title),r.a.createElement(N.a.Text,null,r.a.createElement("a",{href:this.props.news3.url},this.props.news3.description))),r.a.createElement(N.a.Footer,null,r.a.createElement("small",{className:"text-muted"},"Last updated"," ",r.a.createElement(T.a,{date:this.props.news3.publishedAt,durationFromNow:!0})," ","hours ago")))))),r.a.createElement(w.a,{className:"mt-4"},r.a.createElement("h3",null,"Sport News")),r.a.createElement(w.a,null,r.a.createElement(j.a,null,r.a.createElement(O.a,null,r.a.createElement(N.a,null,r.a.createElement(N.a.Img,{variant:"top",src:this.props.sportsnews1.urlToImage}),r.a.createElement(N.a.Body,null,r.a.createElement(N.a.Title,null,this.props.sportsnews1.title),r.a.createElement(N.a.Text,null,r.a.createElement("a",{href:this.props.sportsnews1.url},this.props.sportsnews1.description))),r.a.createElement(N.a.Footer,null,r.a.createElement("small",{className:"text-muted"},"Last updated"," ",r.a.createElement(T.a,{date:this.props.sportsnews1.publishedAt,durationFromNow:!0})," ","hours ago"))),r.a.createElement(N.a,null,r.a.createElement(N.a.Img,{variant:"top",src:this.props.sportsnews2.urlToImage}),r.a.createElement(N.a.Body,null,r.a.createElement(N.a.Title,null,this.props.sportsnews2.title),r.a.createElement(N.a.Text,null,r.a.createElement("a",{href:this.props.sportsnews2.url},this.props.sportsnews2.description))),r.a.createElement(N.a.Footer,null,r.a.createElement("small",{className:"text-muted"},"Last updated"," ",r.a.createElement(T.a,{date:this.props.sportsnews2.publishedAt,durationFromNow:!0})," ","hours ago"))),r.a.createElement(N.a,null,r.a.createElement(N.a.Img,{variant:"top",src:this.props.sportsnews3.urlToImage}),r.a.createElement(N.a.Body,null,r.a.createElement(N.a.Title,null,this.props.sportsnews3.title),r.a.createElement(N.a.Text,null,r.a.createElement("a",{href:this.props.sportsnews3.url},this.props.sportsnews3.description))),r.a.createElement(N.a.Footer,null,r.a.createElement("small",{className:"text-muted"},"Last updated"," ",r.a.createElement(T.a,{date:this.props.sportsnews3.publishedAt,durationFromNow:!0})," ","hours ago")))))),r.a.createElement(w.a,{className:"mt-4"},r.a.createElement("h3",null,"Tech News")),r.a.createElement(w.a,null,r.a.createElement(j.a,null,r.a.createElement(O.a,null,r.a.createElement(N.a,null,r.a.createElement(N.a.Img,{variant:"top",src:this.props.technews1.urlToImage}),r.a.createElement(N.a.Body,null,r.a.createElement(N.a.Title,null,this.props.technews1.title),r.a.createElement(N.a.Text,null,r.a.createElement("a",{href:this.props.technews1.url},this.props.technews1.description))),r.a.createElement(N.a.Footer,null,r.a.createElement("small",{className:"text-muted"},"Last updated"," ",r.a.createElement(T.a,{date:this.props.technews1.publishedAt,durationFromNow:!0})," ","hours ago"))),r.a.createElement(N.a,null,r.a.createElement(N.a.Img,{variant:"top",src:this.props.technews2.urlToImage}),r.a.createElement(N.a.Body,null,r.a.createElement(N.a.Title,null,this.props.technews2.title),r.a.createElement(N.a.Text,null,r.a.createElement("a",{href:this.props.technews2.url},this.props.technews2.description))),r.a.createElement(N.a.Footer,null,r.a.createElement("small",{className:"text-muted"},"Last updated"," ",r.a.createElement(T.a,{date:this.props.technews2.publishedAt,durationFromNow:!0})," ","hours ago"))),r.a.createElement(N.a,null,r.a.createElement(N.a.Img,{variant:"top",src:this.props.technews3.urlToImage}),r.a.createElement(N.a.Body,null,r.a.createElement(N.a.Title,null,this.props.technews3.title),r.a.createElement(N.a.Text,null,r.a.createElement("a",{href:this.props.technews3.url},this.props.technews3.description))),r.a.createElement(N.a.Footer,null,r.a.createElement("small",{className:"text-muted"},"Last updated"," ",r.a.createElement(T.a,{date:this.props.technews3.publishedAt,durationFromNow:!0})," ","hours ago"))))))))}}]),a}(n.Component),I=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:""},e.changeHandler=function(t){e.setState(Object(E.a)({},t.target.name,t.target.value))},e.loginHandler=function(){e.props.login(e.state)},e}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Login"),r.a.createElement("div",null,r.a.createElement(g.a,null,r.a.createElement(w.a,null,r.a.createElement(f.a.Control,{name:"username",type:"username",onChange:this.changeHandler})),r.a.createElement(w.a,null,r.a.createElement(f.a.Control,{name:"password",type:"password",onChange:this.changeHandler})),r.a.createElement(b.a,{variant:"primary",block:!0,onClick:this.loginHandler}," ","Login"))))}}]),a}(n.Component),S=a(365),A=a(364);var F=function(e){var t=e.user,a=e.logout;return r.a.createElement(S.a,{bg:"dark",expand:"lg",variant:"dark"},r.a.createElement(S.a.Brand,{href:"/"},"React-Bootstrap"),r.a.createElement(S.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(S.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(A.a,{className:"mr-auto"},r.a.createElement(m.b,{className:"nav-link",to:"/"},"Home"),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(m.b,{className:"nav-link",to:"/chat"},"Chat"))),r.a.createElement(A.a,null,t?r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a.Link,{href:"#user"},t.username),r.a.createElement(m.b,{to:"/logout",onClick:a,className:"nav-link"},"Logout")):r.a.createElement(r.a.Fragment,null,r.a.createElement(m.b,{to:"/login",className:"nav-link"},"Login"),r.a.createElement(m.b,{to:"/register",className:"nav-link"},"Register")))))},H=a(191);var B=function(e){var t=e.component,a=e.isAuth,n=e.weather,l=e.city,s=e.country,c=e.businessNews,o=e.sportsNews,i=e.techNews,u=e.user,m=Object(H.a)(e,["component","isAuth","weather","city","country","businessNews","sportsNews","techNews","user"]);return r.a.createElement(p.b,Object.assign({},m,{render:function(e){return a?r.a.createElement(t,Object.assign({},e,n,u,{city:l,country:s},c,o,i)):r.a.createElement(p.a,{to:"/login"})}}))},L=a(366),M=a(187),_=a(190),U=a(72),P=a(188),K=a.n(P),R=a(189),D=K.a.connect("http://localhost:5555/");function W(e){var t=Object(n.useState)({message:"",username:"",userid:""}),a=Object(U.a)(t,2),l=a[0],s=a[1],c=Object(n.useState)([]),o=Object(U.a)(c,2),i=o[0],u=o[1],m=Object(n.useState)([]),p=Object(U.a)(m,2),h=p[0],w=p[1];Object(n.useEffect)((function(){d.a.get("".concat("http://localhost:5555/api","/chatroom/showchat")).then((function(e){console.log(e.data.chats[0].userid.username),w(e.data.chats),y()})).catch((function(e){console.log(e)}))}),[]),Object(n.useEffect)((function(){e.user&&s({username:"".concat(e.user.username),message:"",userid:"".concat(e.user._id)})}),[e.user]),Object(n.useEffect)((function(){l.username&&(D.on("message",(function(e){var t=e.username,a=e.message;u([].concat(Object(_.a)(i),[{username:t,message:a}]))})),y())}));var v=function(e){e.preventDefault();var t=l.username,a=l.message,n=l.userid;D.emit("message",{username:t,message:a,userid:n});var r=localStorage.getItem("token");d.a.post("".concat("http://localhost:5555/api","/chatroom/postMessage"),l,{headers:{"x-auth-token":r}}).then((function(e){console.log("msg saved")})).catch((function(e){console.log(e)})),s({message:"",username:t,userid:n})},y=function(){R.animateScroll.scrollToBottom({containerId:"chatbox"})};return r.a.createElement("div",{className:"App"},r.a.createElement(g.a,null,r.a.createElement("h1",null,"Global Chat"),r.a.createElement("div",{className:"render-chat",id:"chatbox"},h.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("h5",null,e.userid.username,": ",r.a.createElement("span",null,e.message)))})),i.map((function(e,t){var a=e.username,n=e.message;return r.a.createElement("div",{key:t},r.a.createElement("h5",null,a,": ",r.a.createElement("span",null,n)))}))),r.a.createElement(f.a.Control,{size:"lg",type:"text",placeholder:"Message",name:"message",onChange:function(e){return function(e){s(Object(M.a)({},l,Object(E.a)({},e.target.name,e.target.value)))}(e)},value:l.message,label:"Message",autoFocus:!0,onKeyPress:function(e){"Enter"===e.key&&v(e)}}),r.a.createElement(b.a,{onClick:v},"Send Message")))}var J="http://localhost:5555/api",q="7a75599c314743819872cc831570d629",z=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={items:[],errorMessage:null,isAuth:!1,user:null,city:"",country:"",weather:{temp:"",temp_max:"",temp_min:""},businessNews:{news1:{},news2:{},news3:{}},sportsNews:{sportsnews1:{},sportsnews2:{},sportsnews3:{}},techNews:{technews1:{},technews2:{},technews3:{}}},e.logoutHandler=function(t){t.preventDefault(),console.log("i logged out"),e.setState({items:[],errorMessage:null,isAuth:!1,user:null}),localStorage.removeItem("token")},e.getUserProfile=function(t){d.a.get("".concat(J,"/auth/user"),{headers:{"x-auth-token":t}}).then((function(t){console.log(t.data),e.setState({isAuth:!0,user:t.data.user})})).catch((function(e){}))},e.loginHandler=function(t){d.a.post("".concat(J,"/auth/login"),t).then((function(t){console.log(t.data),localStorage.setItem("token",t.data.token),e.getUserProfile(t.data.token)})).catch((function(t){e.setState({isAuth:!1,errorMessage:t.response.data.message})}))},e.registerHandler=function(t){console.log(J),d.a.post("".concat(J,"/auth/register"),t).then((function(t){localStorage.setItem("token",t.data.token),e.getUserProfile(t.data.token),e.setState({isAuth:!0})})).catch((function(t){e.setState({isAuth:!1})}))},e.getUserCity=function(){d.a.get("https://ipinfo.io/?token=".concat("4b3e206550b224")).then((function(t){e.setState({city:t.data.city}),e.setState({country:t.data.country}),d.a.get("http://api.openweathermap.org/data/2.5/weather?q=".concat(t.data.city,"&appid=").concat("ddc97c784471015f320af23c626af787","&units=metric")).then((function(t){e.setState({weather:{temp:t.data.main.temp,temp_max:t.data.main.temp_max,temp_min:t.data.main.temp_min}})})).catch((function(e){console.log(e)})),d.a.get("http://newsapi.org/v2/top-headlines?country=".concat(t.data.country,"&category=business&apiKey=").concat(q)).then((function(t){e.setState({businessNews:{news1:t.data.articles[0],news2:t.data.articles[1],news3:t.data.articles[2]}})})).catch((function(e){console.log(e)})),d.a.get("http://newsapi.org/v2/top-headlines?country=".concat(t.data.country,"&category=sports&apiKey=").concat(q)).then((function(t){e.setState({sportsNews:{sportsnews1:t.data.articles[0],sportsnews2:t.data.articles[1],sportsnews3:t.data.articles[2]}})})).catch((function(e){console.log(e)})),d.a.get("https://newsapi.org/v1/articles?source=the-verge&apiKey=".concat(q)).then((function(t){e.setState({techNews:{technews1:t.data.articles[0],technews2:t.data.articles[1],technews3:t.data.articles[2]}})})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");null!=e&&(Object(y.decode)(e)?this.getUserProfile(e):localStorage.removeItem("token"));this.getUserCity()}},{key:"render",value:function(){var e=this,t=this.state,a=t.isAuth,n=t.user,l=t.errorMessage;return r.a.createElement(m.a,null,r.a.createElement(F,{user:n,logout:this.logoutHandler}),l&&r.a.createElement(L.a,null,l),r.a.createElement(p.d,null,r.a.createElement(B,{exact:!0,path:"/",isAuth:a,component:C,weather:this.state.weather,user:n,city:this.state.city,country:this.state.country,businessNews:this.state.businessNews,sportsNews:this.state.sportsNews,techNews:this.state.techNews}),r.a.createElement(p.b,{path:"/register",exact:!0,render:function(){return a?r.a.createElement(p.a,{to:"/"}):r.a.createElement(v,{register:e.registerHandler})}}),r.a.createElement(p.b,{path:"/login",exact:!0,render:function(){return a?r.a.createElement(p.a,{to:"/"}):r.a.createElement(I,{login:e.loginHandler})}}),r.a.createElement(p.b,{path:"/chat",exact:!0,render:function(){return a?r.a.createElement(W,{user:n}):r.a.createElement(I,{login:e.loginHandler})}})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[192,1,2]]]);
//# sourceMappingURL=main.b0f39d55.chunk.js.map